<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Thailand 2026</title>
<link rel="stylesheet" href="kalender.css">
</head>
<body>
<h1>Thailand 2026</h1>
<div id="translateButtons">
  <button onclick="switchLang('de')">Deutsch</button>
  <button onclick="switchLang('th')">ไทย</button>
</div>

<table id="calendar">
<thead><tr id="headerRow"></tr></thead>
<tbody id="calendarBody"></tbody>
</table>

<div id="editModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <div id="modalContent"></div>
  </div>
</div>

<script type="module">
import {getData, closeModal} from './kalender.js';

const personen=["Rouven","Daniel","Henrik","Benja","Holger"];
const start=new Date(2026,1,16),end=new Date(2026,2,12);
let currentLang='de';

window.closeModal=closeModal;
window.switchLang=switchLang;

function switchLang(l){currentLang=l;renderHeader();renderCalendar();}
function formatDate(d){return d.getDate().toString().padStart(2,'0')+"."+(d.getMonth()+1).toString().padStart(2,'0')+".";}
function formatKey(d){return d.getFullYear()+"-"+String(d.getMonth()+1).padStart(2,'0')+"-"+String(d.getDate()).padStart(2,'0');}

function renderHeader(){
  let h=`<th>Datum</th>`;
  personen.forEach(p=>h+=`<th><a href="person.html?name=${p}">${p}</a></th>`);
  document.getElementById('headerRow').innerHTML=h;
}

function renderCalendar(){
  let dObj=getData()[currentLang].preset;
  let b="";
  for(let d=new Date(start);d<=end;d.setDate(d.getDate()+1)){
    let key=formatKey(d),label=formatDate(d);
    b+=`<tr><td>${label}</td>`;
    personen.forEach(p=>{
      let entries=[];
      if(dObj[key]){
        if(dObj[key]["all"])entries=entries.concat(dObj[key]["all"]);
        if(dObj[key][p])entries=entries.concat(dObj[key][p]);
      }
      b+=`<td>${entries.map(e=>`<div class='entry'>${e}</div>`).join("")}</td>`;
    });
    b+=`</tr>`;
  }
  document.getElementById('calendarBody').innerHTML=b;
}

renderHeader();
renderCalendar();
</script>
</body>
</html>