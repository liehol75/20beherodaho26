<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Thailand 2026</title>
<style>
body{font-family:"Segoe UI",Arial,sans-serif;margin:0;background:#f6f6f6;color:#333;}
h1{text-align:center;background:#0077b6;color:#fff;padding:15px;margin:0;box-shadow:0 2px 4px rgba(0,0,0,0.2);}
#translateButtons{text-align:center;margin:15px;}
button.translateBtn{padding:6px 12px;margin:0 5px;cursor:pointer;border-radius:5px;border:none;background:#0077b6;color:#fff;font-weight:bold;transition:background .3s;}
button.translateBtn:hover{background:#0096c7;}
table{border-collapse:collapse;width:100%;margin-bottom:20px;table-layout:auto;font-size:14px;}
th,td{border:1px solid #ccc;padding:5px;text-align:center;vertical-align:top;word-wrap:break-word;}
th.sticky-col,td.sticky-col{position:sticky;left:0;z-index:2;background:#f6f6f6;}
th.nameHeader button{background:#00b4d8;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;font-weight:bold;font-size:16px;}
thead th{position:sticky;top:0;z-index:3;}
.entry{background:#fff;margin:2px;padding:3px;border-radius:3px;display:block;box-shadow:0 1px 2px rgba(0,0,0,.1);}
.entry:nth-child(even){background:#e9e9e9;}
/* Personenfarben */
.personColRouven{background:#ffd9d9;}
.personColDaniel{background:#d9ffd9;}
.personColHenrik{background:linear-gradient(#b3b3ff,#9999ff);}
.personColBenja{background:linear-gradient(#ffe0b3,#ffc266);}
.personColHolger{background:linear-gradient(#dfb3ff,#c299ff);}
.weekendDate{background-color:#ffd699;font-weight:bold;}
/* Bearbeitungsmodus */
#editor{padding:20px;}
.entryBox{border:1px solid #ccc;padding:5px;margin:5px 0;background:#fff;border-radius:5px;}
.entryBox input[type=text]{width:45%;margin-right:5px;}
.todo-item{display:flex;align-items:center;margin:5px 0;}
.todo-item input[type=checkbox]{margin-right:8px;}
button.small{padding:2px 5px;margin-left:5px;}
</style>
</head>
<body>
<h1 id="title">Thailand 2026</h1>
<div id="translateButtons">
  <button class="translateBtn" onclick="setLang('de')">Deutsch</button>
  <button class="translateBtn" onclick="setLang('th')">ไทย</button>
</div>

<div id="mainView">
<table id="calendar">
<thead>
<tr>
<th class="sticky-col" id="dateHeader">Datum</th>
<th class="nameHeader"><button onclick="openEditor('Rouven')">Rouven</button></th>
<th class="nameHeader"><button onclick="openEditor('Daniel')">Daniel</button></th>
<th class="nameHeader"><button onclick="openEditor('Henrik')">Henrik</button></th>
<th class="nameHeader"><button onclick="openEditor('Benja')">Benja</button></th>
<th class="nameHeader"><button onclick="openEditor('Holger')">Holger</button></th>
</tr>
</thead>
<tbody id="calendarBody"></tbody>
</table>
</div>

<div id="editor" style="display:none;">
  <h2 id="editorTitle"></h2>
  <button onclick="backToMain()">&larr; <span id="backText">Zurück</span></button>
  <div id="personCalendar"></div>
  <h3 id="todoTitle">To-Do-Liste</h3>
  <div id="todoList"></div>
  <button onclick="addTodo()">+ <span id="addTodoText">Eintrag</span></button>
</div>

<script>
// Sprachdaten
const translations={
  de:{title:"Thailand 2026",dateHeader:"Datum",back:"Zurück",todoTitle:"To-Do-Liste",addTodo:"Eintrag",
      persons:{Rouven:"Rouven",Daniel:"Daniel",Henrik:"Henrik",Benja:"Benja",Holger:"Holger"},
      defaultTodo:"Gültiger Reisepass (mind. bis 09/2016)"},
  th:{title:"ประเทศไทย 2026",dateHeader:"วันที่",back:"กลับ",todoTitle:"รายการสิ่งที่ต้องทำ",addTodo:"เพิ่ม",
      persons:{Rouven:"รูเวน",Daniel:"แดเนียล",Henrik:"เฮนริก",Benja:"เบนจา",Holger:"โฮลเกอร์"},
      defaultTodo:"หนังสือเดินทางที่ถูกต้อง (อย่างน้อยถึง 09/2016)"}
};
let lang="de";

// Zeitspanne
const start=new Date(2026,1,16);
const end=new Date(2026,2,12);
const personen=["Rouven","Daniel","Henrik","Benja","Holger"];

// Daten laden/speichern
let data=JSON.parse(localStorage.getItem("calendarData")||"{}");
let todos=JSON.parse(localStorage.getItem("todos")||"{}");

// Hilfsfunktionen
function formatDate(d){return String(d.getDate()).padStart(2,"0")+"."+String(d.getMonth()+1).padStart(2,"0")+".";}
function formatKey(d){return d.getFullYear()+"-"+String(d.getMonth()+1).padStart(2,"0")+"-"+String(d.getDate()).padStart(2,"0");}

// Übersicht rendern
function showCalendar(){
  document.getElementById("title").textContent=translations[lang].title;
  document.getElementById("dateHeader").textContent=translations[lang].dateHeader;
  let body="";
  for(let d=new Date(start);d<=end;d.setDate(d.getDate()+1)){
    let dateKey=formatKey(d);
    let dateLabel=formatDate(d);
    let day=d.getDay();
    let dateClass=(day===0||day===6)?"sticky-col weekendDate":"sticky-col";
    body+="<tr><td class='"+dateClass+"'>"+dateLabel+"</td>";
    personen.forEach(p=>{
      let base="personCol"+p;
      let entries=(data[dateKey]&&data[dateKey][p])?data[dateKey][p]:[];
      let combined=entries.map(e=>"<div class='entry'>"+(lang==="de"?e.de:e.th)+"</div>").join("");
      body+=`<td class="${base}">${combined}</td>`;
    });
    body+="</tr>";
  }
  document.getElementById("calendarBody").innerHTML=body;
}
showCalendar();

// Editor
let currentPerson=null;
function openEditor(person){
  currentPerson=person;
  document.getElementById("mainView").style.display="none";
  document.getElementById("editor").style.display="block";
  document.getElementById("editorTitle").textContent=translations[lang].persons[person];
  document.getElementById("backText").textContent=translations[lang].back;
  document.getElementById("todoTitle").textContent=translations[lang].todoTitle;
  document.getElementById("addTodoText").textContent=translations[lang].addTodo;
  renderPersonCalendar();
  renderTodos();
}

function backToMain(){
  localStorage.setItem("calendarData",JSON.stringify(data));
  localStorage.setItem("todos",JSON.stringify(todos));
  document.getElementById("editor").style.display="none";
  document.getElementById("mainView").style.display="block";
  showCalendar();
}

// Personenkalender rendern
function renderPersonCalendar(){
  let html="";
  for(let d=new Date(start);d<=end;d.setDate(d.getDate()+1)){
    let dateKey=formatKey(d);
    let dateLabel=formatDate(d);
    if(!data[dateKey])data[dateKey]={};
    if(!data[dateKey][currentPerson])data[dateKey][currentPerson]=[];
    let entries=data[dateKey][currentPerson];
    html+=`<div class="entryBox"><strong>${dateLabel}</strong> <button class="small" onclick="addEntry('${dateKey}')">+Eintrag</button>`;
    entries.forEach((e,i)=>{
      html+=`<div><input type="text" placeholder="DE" value="${e.de}" onchange="editEntry('${dateKey}',${i},'de',this.value)">
             <input type="text" placeholder="TH" value="${e.th}" onchange="editEntry('${dateKey}',${i},'th',this.value)">
             <button class="small" onclick="deleteEntry('${dateKey}',${i})">x</button></div>`;
    });
    html+="</div>";
  }
  document.getElementById("personCalendar").innerHTML=html;
}

function addEntry(dateKey){
  data[dateKey][currentPerson].push({de:"",th:""});
  renderPersonCalendar();
}
function editEntry(dateKey,i,field,val){
  data[dateKey][currentPerson][i][field]=val;
}
function deleteEntry(dateKey,i){
  data[dateKey][currentPerson].splice(i,1);
  renderPersonCalendar();
}

// To-Do-Liste
function renderTodos(){
  if(!todos[currentPerson])todos[currentPerson]=[{text:translations[lang].defaultTodo,done:false}];
  let html="";
  todos[currentPerson].forEach((item,i)=>{
    html+=`<div class="todo-item">
             <input type="checkbox" ${item.done?"checked":""} onchange="toggleTodo(${i},this.checked)">
             <input type="text" value="${item.text}" onchange="editTodo(${i},this.value)">
             <button class="small" onclick="deleteTodo(${i})">x</button>
           </div>`;
  });
  document.getElementById("todoList").innerHTML=html;
}
function addTodo(){todos[currentPerson].push({text:"",done:false});renderTodos();}
function editTodo(i,val){todos[currentPerson][i].text=val;}
function deleteTodo(i){todos[currentPerson].splice(i,1);renderTodos();}
function toggleTodo(i,checked){todos[currentPerson][i].done=checked;}

// Sprache wechseln
function setLang(l){
  lang=l;
  showCalendar();
  if(currentPerson)openEditor(currentPerson);
}
</script>
</body>
</html>